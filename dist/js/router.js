define(["backbone","underscore"],function(e,t){var n=e.Router.extend({page:null,pageOptions:null,authCheck:null,initialize:function(e){e&&(this.authCheck=e.authCheck),this.on("route",this.onRoute,this)},start:function(){e.history.start()},setRoutes:function(n){t.each(n,function(e){this.route(e[0],e[1])},this),e.history.on("route",this.onRoute,this)},onRoute:function(e,t,n){this.setPage(t,n)},setAuthCallBack:function(e){this.authCheck=e},setPage:function(e,t){this.page=e,this.pageOptions=t,this.trigger("page",e,t)},navigate:function(t,n){return n=n===!1?!1:!0,this.authCheck&&!this.authCheck.call(this,t)?!1:e.Router.prototype.navigate.call(this,t,n)},back:function(){history.back()}});return new n});